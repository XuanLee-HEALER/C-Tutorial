# C程序设计语言（ANCI C）

## 第1章 导言

## 第2章 类型、运算符和表达式

> 变量和常量是程序处理的两种基本数据对象。声明语句说明变量的名字和类型，也可以制定变量的初值。运算符指定将要进行的操作。表达式则把变量和常量组合起来生成新的值。对象的类型决定该对象可取值的集合以及可以对该对象执行的操作

### 变量名

* 名字是由字母和数字组成的序列，*_*被看作字母，通常用于命名较长的变量名，由于库例程的名字通常以下划线开头，变量名不要以下划线开头
* 变量名区分大小写

### 数据类型及长度

基本数据类型

* char 字符型，占用一个字节，可以存放本地字符集中的一个字符
* int 整型，通常反映所用机器中整数的最自然长度
* float 单精度浮点型
* double 双精度浮点型

可以在这些基本数据类型的前面加上限定符，*short*与*long*两个限定符用于限定整型

```c
// 关键字int可以省略

short int sh;
long int counter;
```

*short*与*int*类型至少为16位，*long*类型至少为32位，*short*类型不得长于*int*类型，*int*类型不得长于*long*类型

类型限定符*signed*与*unsigned*可用于限定*char*类型或任何整型

*unsigned*类型的数总是正值或0，遵守算术模2^n定律，n是该类型占用的位数

*long double*类型表示高精度的浮点数

### 常量

* long类型的常量以字母*l*或*L*结尾
* 无符号常量以字母*u*或*U*结尾，后缀为*ul*或*UL*表明是unsigned long类型
* 浮点数常量包含一个小数点或一个指数（1e-2），也可以两个都有，没有后缀的浮点数常量为double类型，后缀*f*或*F*表示float类型，后缀*l*或*L*表示long double类型
* 带前缀*0*的整型常量表示它为八进制形式，前缀为*0x*或*0X*表示它为十六进制形式，八进制与十六进制的常量也可以使用后缀*L*表示long类型，使用后缀*U*表示unsigned类型
* 一个字符常量是一个整数
* 常量表达式是仅仅只包含常量的表达式，这种表达式在编译时求值，它可以出现在常量可以出现的任何位置
* 从技术角度看，字符串常量就是字符数组，字符串的内部表示使用一个空字符`'\0'`作为串的结尾
* 枚举是一个常量整型值的列表，没有显示说明的情况下，enum类型第一个枚举名的值为0，第二个为1，以此类推。不同枚举中的名字必须互不相同，同一个枚举中不同名字可以具有相同的值

```c
enum months { JAN = 1, FEB, MAR, APR, MAY, JUN, JUL,
    AUG, SEP, OCT, NOV, DEC };
```

### 声明

* 所有变量必须先声明后使用，尽管某些变量可以通过上下文隐式声明。一个声明指定一种变量类型，后面所带的变量表可以包含一个或多个该类型的变量
* 如果变量不是自动变量（局部变量），则只能进行一次初始化操作，程序开始执行前进行，初始化表达式必须为常量表达式
* 默认情况下，外部变量和静态变量将被初始化为0，未经显式初始化的自动变量的值为自定义值（无效值）
* 任何变量的声明都可以使用*const*限定符限定，该限定符指定的变量的值不能被修改。对数组而言，数组中所有元素的值不能被修改。*const*配合数组参数使用，表明函数不能修改数组元素的值

### 算术运算符

二元运算符包括 + - * / %

### 关系运算符和逻辑运算符

关系运算符包括 > >= < <=

优先级次于上述运算符的相等性运算符 == !=

逻辑运算符 && || 在知道结果值为真或假后立即停止计算

逻辑非运算符 ! 将非0操作数转为0，将操作数0转换为1

### 类型转换

自动转换是把“比较窄的”操作数转换为“比较宽的”操作数，并且不丢失信息的转换

如果要在char类型的变量中存储非字符数据，最好指定signed或unsigned限定符

“真”就意味着“非0”

当把较长的整数转换为较短的整数或char类型时，超出的高位部分将被丢弃

```c
// 强制类型转换
(类型名) 表达式
```

强制类型转换：表达式首先被赋值给类型为指定类型的某个变量，再用该变量替换整条语句。表达式本身的值并没有改变

通常情况下，参数是通过函数原型声明的，当函数被调用时，声明将对参数进行自动强制转换

### 自增运算符和自减运算符

前缀运算符`++n`先将n的值递增1，然后再使用n的值，`n++`先使用变量n的值，再将n的值递增1

自增与自减运算符只能作用于变量

### 按位运算符

* 按位与&经常用于屏蔽某些二进制位
* 按位或|经常用于二进制位置1
* 按位异或^当两个操作数的对应位不相同时将该位设置为1，否则将该位设置为0
* 移位运算符（右操作数必须是非负值），左移右边空出的位用0补，unsigned类型右移，左边空出的位用0补，signed类型右移，某些机器用符号位补（算术移位），某些机器用0补（逻辑移位）
* 一元运算符～用于求整数的二进制反码

### 赋值运算符与表达式

`+ - * / % << >> & ^ |`都有一个相应的赋值运算符`op=`

```c
expr1 op= expr2
<=>
expr1 = (expr1) op (expr2)
```

赋值表达式的类型是它的左操作数的类型，其值是赋值操作完成后的值

### 条件表达式

`expr1 ? expr2 : expr3`首先计算expr1，如果值不为0，计算expr2的值，并以该值作为条件表达式的值，否则计算expr3的值，并以该值作为条件表达式的值

### 运算符优先级与求值次序

> 在任何一种编程语言中，如果代码的执行结果与求值顺序相关，则都是不好的程序设计风格

## 第3章 控制流

> 程序语言中的控制流语句用于控制各计算机操作执行的次序

### 语句与程序块

分号是语句结束符，表达式后加上一个分号，就变成了*语句*

用一对花括号`{}`把一组声明和语句括在一起就构成了一个*复合语句*（程序块），复合语句在语法上等价于单条语句，右花括号用于结束程序块，其后不需要分号

### if-else语句

```c
if (expression)
    statement1
else
    statement2
```

表达式为真（值非0）执行`statement1`，值为假（值为0）且该语句包含else部分，执行`statement2`

有`if`语句嵌套的情况下使用花括号

### else-if语句

```c
if (expression)
    statement
else if (expression)
    statement
else
    statement
```

这种`if`语句序列是编写多路判定最常用的方法

### switch语句

```c
switch (expression) {
    case CONSTANT: statements
    case CONSTANT: statements
    default: statements
}
```

`switch`语句是一种多路判定语句，它测试表达式是否与一些常量整数值中的某个匹配，并执行相应的分支动作

作为一种良好的程序设计风格，在`switch`语句最后一个分支的后面加上一个`break`语句

### while循环和for循环

```c
while (expression)
    statement

for (expression1; expression2; expression3)
    statement

for <=> while:

expression1;
while(expression2) {
    statement;
    expression3;
}
```

从语法角度看，`for`循环语句的3个组成部分都是表达式。常见情况是`expression1`和`expression3`是赋值表达式或函数调用，`expression2`是关系表达式。这3个组成部分中的任何部分都可以省略，但是分号不能省略

`,`运算符也是C语言中优先级最低的运算符。被逗号分隔的一对表达式将按照从左到右的顺序进行求值，各表达式右边的操作数的类型和值即为其结果的类型和值

### do-while循环

```c
do
    statement
while (expression);
```

### break语句和continue语句

`continue`语句的执行意味着立即执行测试部分，在`for`循环中，则意味着使控制转移到递增循环变量部分

### goto语句和标号

`goto`最常见的用法是终止程序在某些深度嵌套的结构中的处理过程

```c
for (;;)
    for (;;) {
        if (disaster)
            goto error;
    }

error:
    statements;
```

标号的命名同变量命名的形式相同，标号的后面要紧跟一个冒号，标号可以位于对应的`goto`语句所在函数的任何语句的前面。标号的作用域是整个函数

> 尽可能少地使用goto语句

## 第4章 函数与程序结构

## 第5章 指针与数组

## 第6章 结构

## 第7章 输入与输出

## 第8章 UNIX系统接口